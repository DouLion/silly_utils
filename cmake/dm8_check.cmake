# 检查达梦数据库的一些信息
IF("" STREQUAL "$ENV{DM_HOME}")
    MESSAGE(STATUS "DM_HOME NOT FOUND.")
ELSE()
    MESSAGE(STATUS "FOUND DM_HOME: $ENV{DM_HOME}")
    SET(DM8_DPI_ROOT  $ENV{DM_HOME}/drivers/dpi)
    MESSAGE(STATUS "FOUND ${DM8_DPI_ROOT}")
    IF(EXISTS "${DM8_DPI_ROOT}")
        SET(DM8_DPI_INCLUDE ${DM8_DPI_ROOT}/include)
        SET(DM8_DPI_LIBRARY "${DM8_DPI_ROOT}/dmdpi.${STATIC_LIB_SUFFIX}")
        MESSAGE(STATUS "USE DM DPI INCLUDE: ${DM8_DPI_INCLUDE}")
        MESSAGE(STATUS "USE DM DPI LIB: ${DM8_DPI_LIBRARY}")
        INCLUDE_DIRECTORIES(${DM8_DPI_INCLUDE})
        LINK_LIBRARIES(${DM8_DPI_LIBRARY})
        # FILE(COPY  ${DM8_DPI_LIBRARY}/*.dll DESTINATION ${EXECUTABLE_OUTPUT_PATH})
        FILE(GLOB DM8_DYNAMIC_LIBRARIES "${DM8_DPI_ROOT}/*.${DYNAMIC_LIB_SUFFIX}" )
        IF(NOT EXISTS ${EXECUTABLE_OUTPUT_PATH})
            FILE(MAKE_DIRECTORY ${EXECUTABLE_OUTPUT_PATH})
        ENDIF()
        FOREACH(dlf ${DM8_DYNAMIC_LIBRARIES})
            # FILE(COPY ${dlf} DESTINATION ${EXECUTABLE_OUTPUT_PATH})
            execute_process(COMMAND ${CMAKE_COMMAND} -E  copy "${dlf}" "${EXECUTABLE_OUTPUT_PATH}")
        ENDFOREACH()
        ADD_DEFINITIONS("-DDM8_ENABLED")
    ELSE()
        MESSAGE(STATUS "NOT FOUND DM DRIVER DIR.")
    ENDIF()
ENDIF()